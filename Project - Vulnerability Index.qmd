---
title: "Project - Vulnerability Index"
author: "Valentine Petzold - Clémence HUANG"
format: html
editor: visual
---

# 1. Introduction

[Link to our github repository](https://github.com/clemence-code/Data_management_Project)

## 1.1 Description of the project - Research question

The objective of this project is to construct a climate vulnerability index that allows a systematic comparison of countries in terms of their vulnerability to climate change. Rather than relying on existing composite indicators, we propose to design our own multidimensional index built around three core dimensions widely used in the literature: Exposure, Sensitivity, and Adaptive Capacity. By explicitly combining these dimensions using transparent data and methods, we aim to better understand which structural factors drive a country’s vulnerability and to identify profiles of countries that may require differentiated policy responses.

The first dimension, Exposure, measures the degree to which each country is physically exposed to climate-related hazards. In this project, exposure will be captured using indicators from the OECD and related sources that reflect the frequency and intensity of climate hazards, as well as the extent of populations and territories at risk. The guiding idea is that two countries may differ strongly in their baseline exposure even before considering their socio-economic characteristics or institutional responses.

The second dimension, Sensitivity, reflects how strongly a country’s society and economy are affected when a climate shock occurs. This dimension will incorporate a set of social and economic indicators such as poverty rates, the Human Development Index (HDI), governance quality, and measures of income inequality. Countries with high poverty, low human development, weak institutions, or high inequality may experience more severe impacts from the same physical shock. By integrating these variables, the index aims to capture how underlying socio-economic fragilities translate into greater climate vulnerability.

The third dimension, Adaptive Capacity, captures the ability of a country to anticipate, absorb, and recover from climate-related shocks. We will focus on indicators that proxy institutional strength, technological advancement and policy commitment, such as renewable energy production, the stringency and ambition of environmental policies, and public spending on environmental and climate-related research. The assumption is that higher adaptive capacity can mitigate the negative effects of exposure and sensitivity, reducing overall vulnerability even in high-risk contexts.

Methodologically, the project will involve selecting, normalising and aggregating indicators within each dimension, and then combining the three dimensions into a composite index of climate vulnerability. We will carefully examine correlations between variables to avoid redundancy and ensure that each indicator brings distinct information. Different weighting schemes (equal weights, data-driven weights, or robustness checks with alternative specifications) may be compared. Finally, the resulting index will be analysed descriptively to identify patterns of vulnerability across countries (for example, highly exposed but relatively resilient countries versus highly sensitive and poorly equipped ones).

## 1.2 Description of the sources

-   OECD
    -   [Historical exposure to extreme temperatures (0ECD, 1979-2024)](https://data-explorer.oecd.org/vis?bp=true&df%5Bds%5D=dsDisseminateFinalDMZ&df%5Bid%5D=DSD_ECH%40EXT_TEMP_H&df%5Bag%5D=OECD.ENV.EPI&df%5Bvs%5D=2.0&dq=AFG%2BBFA%2BBDI%2BCAF%2BTCD%2BSWZ%2BETH%2BGUF%2BATF%2BGLP%2BHMD%2BVAT%2BKAZ%2BXKV%2BKGZ%2BLAO%2BLSO%2BLIE%2BMWI%2BMLI%2BMTQ%2BMDA%2BMNG%2BNPL%2BNER%2BNFK%2BMKD%2BPRY%2BREU%2BRWA%2BSMR%2BSRB%2BSGS%2BSSD%2BTJK%2BTKM%2BUGA%2BUMI%2BUZB%2BZMB%2BZWE%2BIOT%2BBVT%2BBWA%2BBOL%2BBTN%2BBLR%2BAZE%2BARM%2BAND%2BCHE%2BSVK%2BLUX%2BHUN%2BCZE%2BAUT%2BALB%2BDZA%2BASM%2BAGO%2BAIA%2BATG%2BARG%2BABW%2BBHS%2BBHR%2BGGY%2BBGD%2BBRB%2BBLZ%2BBEN%2BBMU%2BBIH%2BBRA%2BVGB%2BBRN%2BBGR%2BCPV%2BKHM%2BCMR%2BCYM%2BCHN%2BCXR%2BCOM%2BCOG%2BCOK%2BCIV%2BHRV%2BCUB%2BCYP%2BPRK%2BCOD%2BDJI%2BDMA%2BDOM%2BECU%2BEGY%2BSLV%2BGNQ%2BERI%2BFRO%2BFJI%2BPYF%2BGAB%2BGMB%2BGEO%2BGHA%2BGRL%2BGRD%2BGUM%2BGTM%2BGIN%2BGNB%2BGUY%2BHTI%2BHND%2BHKG%2BIND%2BIDN%2BIRN%2BIRQ%2BIMN%2BJAM%2BJEY%2BJOR%2BKEN%2BKIR%2BKWT%2BLBN%2BLBR%2BLBY%2BMAC%2BMDG%2BMYS%2BMDV%2BMLT%2BMHL%2BMRT%2BMUS%2BMYT%2BFSM%2BMCO%2BMNE%2BMSR%2BMAR%2BMOZ%2BMMR%2BNAM%2BNRU%2BNCL%2BNIC%2BNGA%2BNIU%2BMNP%2BOMN%2BPAK%2BPLW%2BPSE%2BPAN%2BPNG%2BPER%2BPHL%2BPCN%2BPRI%2BQAT%2BROU%2BRUS%2BSHN%2BKNA%2BLCA%2BSPM%2BVCT%2BWSM%2BSTP%2BSAU%2BSEN%2BSYC%2BSLE%2BSGP%2BSLB%2BSOM%2BZAF%2BLKA%2BSDN%2BSUR%2BSJM%2BSYR%2BTWN%2BTZA%2BTHA%2BTLS%2BTGO%2BTKL%2BTON%2BTTO%2BTUN%2BTCA%2BTUV%2BUKR%2BARE%2BVIR%2BURY%2BVUT%2BVEN%2BVNM%2BWLF%2BESH%2BYEM%2BAU1%2BAU2%2BAU3%2BAU4%2BAU5%2BAU6%2BAU7%2BAU8%2BAUS%2BBEL%2BCAN%2BCHL%2BCOL%2BCRI%2BDNK%2BEST%2BFIN%2BFRA%2BDEU%2BGRC%2BISL%2BIRL%2BISR%2BITA%2BJPN%2BKOR%2BLVA%2BLTU%2BMEX%2BNLD%2BNZL%2BNOR%2BPOL%2BPRT%2BSVN%2BESP%2BSWE%2BTUR%2BGBR%2BUSA%2BG7%2BG20%2BEA19%2BEU27%2BOECD%2BOECDA%2BOECDSO%2BOECDE%2BAES%2BEMES%2BIPAC.A..........&fc=Topic&fs%5B0%5D=Topic%2C1%7CEnvironment%20and%20climate%20change%23ENV%23%7CAir%20and%20climate%23ENV_AC%23&pg=0&snb=13&to%5BTIME_PERIOD%5D=false&pd=%2C&vw=tb)
    -   [Environmental Policy Stringency indicator (EPS)](https://data-explorer.oecd.org/vis?lc=en&tm=environmental%20policy&pg=0&snb=94&df%5bds%5d=dsDisseminateFinalDMZ&df%5bid%5d=DSD_EPS%40DF_EPS&df%5bag%5d=OECD.ECO.MAD&df%5bvs%5d=1.0&dq=.A..EPS&to%5bTIME_PERIOD%5d=false&pd=%2C&vw=tb)
-   Human development report : [Index of Human Development (1990-2025)](https://hdr.undp.org/data-center/human-development-index#/indicies/HDI)
-   World inequality database : [Income share of the top 10% and top 10% carbon emitters (1980-2023)](https://wid.world/data/)
-   EMBER : [Electricity production from renewable sources (1985-2024)](https://ember-energy.org/data/yearly-electricity-data/)
-   World bank :
    -   [Per capita energy use (1990-2023)](https://data.worldbank.org/indicator/EG.USE.PCAP.KG.OE)
    -   [R&D spending as a share of GDP (1996-2023)](https://data.worldbank.org/indicator/GB.XPD.RSDV.GD.ZS)

## 1.3 Description of the data file

### 1.3.0 Set up

```{r}
library(vroom)
library(here)
library(ggplot2)
library(dplyr)
library(readxl)
```

```{r}
here::i_am('Data_management_Project.Rproj')
```

#### Unzipping the files

```{r}
#zip_files <- list.files(
#  here("raw_data"),
#  pattern = "\\.zip$",
#  full.names = TRUE
#)

#for (f in zip_files) {
#  unzip(f, exdir = here("data_file"))
#}
```

### 1.3.1 Historical exposure to extreme temperatures

```{r}
Temperature_exposure<-read_excel("raw_data/OECD.ENV.EPI,DSD_ECH@EXT_TEMP_H,2.0,filtered,2025-11-19 13-23-57.xlsx", skip=8)
```

```{r}
Temperature_exposure |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.2 Human Development index

```{r}
HDI <- read_excel("raw_data/HDR25_Statistical_Annex_HDI_Table.xlsx.", skip=4)
```

```{r}
HDI |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.3 Income share of the top 10%

```{r}
Top_10 <- vroom(here("data_file/WID_Data_Metadata", "WID_Data_19112025-132927.csv"), delim=";",skip=1)#need to skip the first raw
```

```{r}
Top_10 |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.4 Environmental Policy Stringency

```{r}
Environmental_Policy_Stringency_Index<- read_excel("raw_data/OECD.ECO.MAD,DSD_EPS@DF_EPS,1.0,filtered,2025-11-19 13-27-34.xlsx", skip=6)
```

```{r}
Environmental_Policy_Stringency_Index |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.5 Share of electricity from renewable resources

```{r}
Renewable_Electricity_Share<- vroom(here("raw_data", "yearly_full_release_long_format.csv"))
```

```{r}
Renewable_Electricity_Share |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.6 Per capita energy use

```{r}
PC_Energy_Use<- vroom(here("data_file", "Metadata_Country_API_EG.USE.ELEC.KH.PC_DS2_en_csv_v2_129274.csv"))
```

```{r}
PC_Energy_Use |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.7 Research and development as a share of GDP

```{r}
RandD_share_of_GDP<- vroom(here("data_file", "API_GB.XPD.RSDV.GD.ZS_DS2_en_csv_v2_216043.csv"), skip=4)
```

```{r}
RandD_share_of_GDP |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.8 ND-Gain vulnerability index

```{r}
capacity<- vroom(here("data_file/resources/vulnerability", "capacity.csv"))
```

```{r}
capacity |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
ecosystems<- vroom(here("data_file/resources/vulnerability", "ecosystems.csv"))
```

```{r}
ecosystems |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
exposure<- vroom(here("data_file/resources/vulnerability", "exposure.csv"))
```

```{r}
exposure |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
food<- vroom(here("data_file/resources/vulnerability", "food.csv"))
```

```{r}
food |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
habitat<- vroom(here("data_file/resources/vulnerability", "habitat.csv"))
```

```{r}
habitat |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
health<- vroom(here("data_file/resources/vulnerability", "health.csv"))
```

```{r}
health |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
infrastructure<- vroom(here("data_file/resources/vulnerability", "infrastructure.csv"))
```

```{r}
infrastructure |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
sensitivity<- vroom(here("data_file/resources/vulnerability", "sensitivity.csv"))
```

```{r}
sensitivity |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
vulnerability_delta<- vroom(here("data_file/resources/vulnerability", "vulnerability_delta.csv"))
```

```{r}
vulnerability_delta |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
vulnerability<- vroom(here("data_file/resources/vulnerability", "vulnerability.csv"))
```

```{r}
vulnerability |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

```{r}
water<- vroom(here("data_file/resources/vulnerability", "water.csv"))
```

```{r}
water |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.9 CO2 emissions per capita

```{r}
CO2em<- vroom(here("raw_data", "yearly_full_release_long_format.csv"))
```

```{r}
CO2em|> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

### 1.3.10 World Development Indicator

```{r}
WDI<- read_excel("data_file/wgidataset.xlsx")
```

```{r}
WDI |> 
  summarise(
    number_of_rows = n(),
    number_of_columns = ncol(across()),
    number_of_NA = sum(is.na(across()))
  ) |>
  knitr::kable()
```

# 2. Data set up

cleaning joining merging
